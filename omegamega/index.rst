
できね！家庭用3Dプリンタ
========================

家庭用FDM式3Dプリンタでがんばってみた話
---------------------------------------

どーも、おめがです。数か月前から家庭用FDM式3Dプリンタを触る機会があり、もりもりといろいろ試していたら、性能不満やらいろいろで自分でも買ってしましました。
如何せんその高いお値段、特化された用途から、3Dプリンタ購入者はそこまで多くないかと思います。そのくせ、買って使ってみると分かる、高いフィラメントから来る運用コスト、紙のプリンターとは一線を隠す繊細な調整等々、なかなか一筋縄では行かない機器でもあります。
今回はその辺について、ここ半年いろいろ試してわかったことを書きたいと思います。実際に運用した3Dプリンタ以下の通り
 
* Up!Plus2(国内代理店PP3DP http://www.pp3dp.jp/)

  * どうやら生産は中国のようで、推測ですが複数の代理店とその代理店が付けた独自の名前を持っているようです。米国ではAfinia(http://www.afinia.com/)が扱っており、AfiniaH479/H480の名前で販売されています。AfiniaH479は米国誌Makerで高い評価を受けていたようで、こちらの方が有名でしょう。
  * Up!plus2は国内代理店PP3DPが付けた名前で、おそらくAfiniaH480の同型です。僕はこれを購入しました。おすすめできるプリンタです
  * 使用フィラメントはPLAとABS(スプール)、専用ソフトとドキュメントはすべて日本語済み。工具一式付属

* SCOOVO C170(国内オープンキューブ/アビー)

  * 国内で"3Dプリンタ"を探してくると必ず出てくる3Dプリンタ。個人的にはおすすめできないプリンタです
  * 今年(2014年)になってから大きく設計が異なる後継機を発表したり、3Dプリンタ事業が統合されたりとバタバタしている模様。
  * 使用フィラメントはPLA(スプール)、なんだかオリジナルな設計に見えるがReprap系であり、付属ソフトはすべてOSS(一部のみ日本語化)

* Da Vinci(台湾XYZPrinting)

  * 2014年に発表された3Dプリンタ。完成品で7万円という低コストながら、オートキャリフレーション機能を搭載し、密閉型である点が話題になりました。
  * 使用フィラメントはPLA(専用カートリッジ式)。ソフトウエアについては触れたことがないので詳細までは分かりません


FDM式3Dプリンタ #とは
---------------------

さて、まずはFDM式3Dプリンタの構造と動きをざっと見てみましょう
FDM式(=熱溶解式積層法/Fused Deposition Modeling)はその名の通り、樹脂を暖めて溶かして出力、外気で冷やして層として、その層を重ねることで立体を作る造形方法です。生クリーム絞り機でケーキをデコレーションする、そのクリームを樹脂で置き換えたもの、と言うとイメージが掴みやすいでしょうか。

.. figure:: img/FDM_by_Zureks.eps
   :align: center
   :scale: 30%

   だいたいケーキデコレーションと同じ by Zureks(CC by-sa)

ヘッド部
^^^^^^^^^^

.. figure:: img/DSC00054.eps
   :align: center
   :scale: 30%

   Up!Plus2(Afinia H480)のエクストルーダ。半田ゴテの先端のような部分からアツアツのフィラメントが出てきて造形される

ケーキで言うところのクリームを、熱で溶けるPLA/ABS樹脂で置き換えたものという言い方もできるす。この樹脂射出部をエクストルーダ(Extruder)といい、その近くにはエクストルーダを暖めるヒーター(Heater)、熱管理をする温度センサ、余計な部分を暖めないためと造形物を冷やす冷却ファン、樹脂を送り出すギアが集まっていることが多いでしょう。送り出しギアで樹脂が押されると、熱いエクストルーダ内部に溜まっている溶けた樹脂が押し出され、自然放熱やファンによる冷却で固まり造形物ができる、というわけですね。

ステージ
^^^^^^^^^^

.. figure:: img/DSC00055.eps
   :align: center
   :scale: 30%

   Up!Plus2(Afinia H480)のステージ。!マークのついたフレームが上下Z軸方向へ動き、ステージ自体は前後Y軸方向へ動く

さて、ヘッド部ができました。これをXYZの3軸それぞれへ動かしつつ、フィラメントを吐き出して造形をします。ここもケーキのデコレーションと同じですね。FDM式3Dプリンタの場合、下から上へ層を重ねていく都合、Z軸だけ特別な設計をされていることが多いです。プリンタの動作シーンを見たことある人は分かると思いますが、XY軸方向へは頻繁に走りますが、Z軸は層を完成させるごとに1層分動くだけ、言ってしまえば造形を完了するまでに下から上まで1通り走るだけです。一方でZ軸の精度は0.1ミリ以下の精度がなければ、層と層が剥がれてしまいます。
デコレーションするケーキ、またはお皿に当たるのが、プラットフォームまたはステージ、ベッドです。ほぼすべてのプリンタに高さや傾き調整ができる構造をしていて、ネジやツマミで調整ができるようになっています。また、プリンタの設計によっては、ステージとYZ軸がユニット化されたり、ステージが表面のプレートを外せるようになっていたりします。プリント後の造形品はステージに張り付いていますから、本体から外せた方が何かと便利ということですね。
プリンタによっては、ステージやベッドを暖める機能があります。特にフィラメントにABSを使う機種にあり、前述したABS特有の温度による体積変化を少なくし、造形精度を高めたり、ステージからはがれる問題を防ぐ効果があります。とはいえ、あくまで加熱されるのはステージ、ベッド部だけであり、Z軸方向に2,3cm離れてしまえば造形物へ伝わる熱はわずかになってしまうため、全体としての高精度造形を求める場合には、プリンタ全体を囲んだり密閉して造形物全体を暖める工夫が必要でしょう

フィラメント
^^^^^^^^^^^^^

.. figure:: img/DSC00057.eps
   :align: center
   :scale: 30%

   ABS/PLAフィラメント。ひと巻き700gのスプールタイプ

フィラメントは造形物を作る素材で、ケーキデコレーションで言うところのクリームに相当します。多くの3Dプリンタはむき出しのスプールの形でフィラメントを持ち、ヘッド部のフィラメント送り機構でそれを取り込んで動きます。取り付けるときは、フィラメントが絡まったりしていないか、スムーズにスプールが回転するか注意します。PLAやABSといったものがよく使われます。

* ABS

  * 融解温度は260℃前後。PLAと比べるとお高め
  * 融解時の特性に優れているようで、温度管理が雑でも高精度にできる反面、温度による体積変化が大きく、歪んだり剥がれたりしやすい。室温管理が重要な素材
  * 小さいモノ向き
  * 融解時はちょっと気になる臭い

* PLA

  * 融解温度は200℃前後。ABSと比べると安い
  * 融解時は温度変化にセンシティブで、5℃上げただけでも粘性が大きく落ちて造形が雑になったりする。温度による体積変化が少ない。ヘッドの温度管理が重要な素材
  * 大きいモノ向き

どのフィラメントもさまざまな色で販売なされていますが、色が付くということはつまり不純物が入るということですから、同じ素材であったも色違いで物性が変わってきます。個人的な感触では、色が薄い半透明の素材が使いやすく、色が濃い素材ほど難易度が上がる感触があります。必ず、フィラメントを変更したときの初回造形は、テスト出力をしましょう。クオリティによっては、出力しやすい素材で作った後、塗装などで目的の色にする方法も考慮にいれましょう
同様な理由で、蓄光や透明、ラメ入りといった特殊な色のフィラメントも難しいと思われます。

.. figure:: img/IMAG0244.eps
   :align: center
   :scale: 30%

   透明PLAフィラメントの実験。ラフトやサポートの固着が強く、普通のPLAより数段階クオリティが低い出来となった

他にも、木材風フィラメントやゴム風素材のフレキシブルフィラメントなどありますが、未検証なのでここでは扱いません。

3D Systems社のCubeシリーズや、XYZPrinting社のDa Vinciなどは専用のカートリッジフィラメントです。おそらく、プリンタインク商法に近いビジネス都合もあるでしょう。内部は同じスプールにフィラメントが巻き付いていますが、モノによっては既存のインクジェットプリンタ同様、ICによって残量チェック等されている場合があります。
安価なサードパーティーのフィラメントを使って、安価に再補充する方法を模索している人たちがいますが、造形を第一にする場合、個人的には再補充はおすすめしません。

というのも、専用カートリッジを採用しているプリンタの場合、ソフト側がReprapのようなOSSではないために細かい設定ができないパターンがあるようで、そのフィラメントに最適な設定ができません。また、ABS/PLAと一言に言っても、融解温度や物性がメーカーはもちろんの事、色違いですら発生します。加えて、3Dプリンタが出力する体積はフィラメントの太さが一定なのを前提に長さ基準で決めてますから、フィラメント太さの精度が造形精度に直接関わってきます。

.. figure:: img/slic3r_setting.eps
   :align: center
   :scale: 30%

   Reprap系の有名なスライサー"Slic3r"のドキュメント。この英語ドキュメントを読みつつ、フィラメントに合わせた設定を探る必要がある

Reprap系なら、非純正フィラメントを試す価値はあると思いますが、それでも上記のパラメータ設定を絞り込んでいく過程がある以上、手間とコストからあまりおすすめはできません。
逆に言うとReprap系は、設定を試行錯誤することで特殊フィラメントに適応できるということでもありますが、そういったトライアンドエラーに時間とコストを掛け、情報を探せるユーザ向けとも言えます。

電装とソフトウエア
^^^^^^^^^^^^^^^^^^^

3Dプリンタの制御には、ざっくり分けて3種類程度のパターンがあります。

常時PCからの制御を受けて動くタイプ
"""""""""""""""""""""""""""""""""""

Reprap系の多くがこれです。PCにはホストアプリケーションを入れ、USBで3Dプリンタ本体とデータをやり取りします。
プリンタ稼働時間中はずっとPCを付けっぱなしにする必要があるので、設置場所に困ったり、別途3Dプリンタ用に低消費電力なPCを用意するということが必要になるかもしれません。

データ転送等のタイミングでPCが必要だが、単独で動けるタイプ
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
MakerbotなどSDカードによるデータ転送で動くモノや、Afinia/Up!plusのようなプリント開始時にすべてのデータ転送を終わらせてしまい長い出力時はPCを必要としないモノがこれにあたります。

単独で動けるタイプ
""""""""""""""""""""

これは少数しかありません。DaVinciのサンプルデータは単体で出力可能なようですが、他での例を聞きません。
というのも、3Dモデルデータをプリンタの制御方式に変換する工程"スライス"は大変なソフト処理であり、出力結果に直接影響するため、スライスを行うソフト"スライサー"はその分3Dプリンタのソフトメーカーの腕の見せ所となっているのです。そのため、開発が楽で、計算量もメモリにも余裕があるPCを使うのが、一般的となっています。
ただ、プリンタ購入者にとって、すぐさま動作検証できないのは何かと不便ですから、事前に処理したデータをプリンタに内臓しておいてサンプル出力をできるようにする、というがDa Vinciのやっていることのようです。

Reprap系とその他の3Dプリンタ
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. figure:: img/DSC00059.eps
   :align: center
   :scale: 30%

   やたらとバリエーションがあるように見えるFDM式3Dプリンタだが、実は大半がReprapの兄弟機なのだ


市場に数多く出ている3Dプリンタの多くは、Reprap系です。Reprap系のハードとソフトはオープンソースであり、3Dプリンタ側コントローラもArduinoと汎用品なため、ホストアプリケーションやその内部で使われるスライサソフトも選択肢が多くなります。
選択肢が多いということは自力でそれらを学び必要に応じて調整改善していくことが可能ということです。前述した非純正フィラメントやその他特殊マテリアルの使用も、ソフトウエア側の調整で可能になったりします。もちろん、それはトラブルの原因になることもあるでしょうし、相応の学習と時間、コストが必要になる、ということでもあります。
また、オープンソースであることから、いろいろなメーカーが雑多にリリースしているということでもあります。単なるデッドコピーとして3Dプリンタを製造し、OSSのソフトウエアを添付して出荷している企業もあるでしょう。
DIYの力と情報収集力が要求されるタイプとも言えます。3Dプリンタを造形ではなく、3Dプリンタでできることを探す調べる目的にはおすすめできるタイプです。


.. figure:: img/Bo76Kk-IUAA7Ii7.eps
   :align: center
   :scale: 30%

   Up!Plus2が吐くサポート材は広い面に張り付いていても手でパリパリ取れる。独自3Dプリンタ故にできる品質


Reprap系はこうしてオープンソースハード、オープンソースソフトとすることで価格破壊を起こし、Makerムーブメントの波に乗って一気に普及させました。しかし、FDM式3Dプリンタが昔かななかったわけではありません。もともと、FDM式3DプリンタはStratasys社が持つ特許であったのが、近年特許が切れたために他者参入があったというのが歴史的な流れです。
また、近年の3Dプリンタブームに乗って、新に3Dプリンタ業界に参入する流れもあり、Afinia/Up!Plusや、XYZPrintingのDaVinciはそういう流れによるものと思われます。
この手のタイプに多いのは、ソフトウエアやフィラメント等の消耗品が専用品であることです。そのため、オープンソースなReprap系と比べ、導入/運用コスト両面において高くなりがちです。一方で、ちゃんとしたメーカーであれば、自社の製品と自社のフィラメントという極めて整った環境で造形をすることができるため、相性問題や調整等が少なくとも綺麗に精度が高い造形をすることができます。3Dプリンタをツールとして、信頼できる造形手段として使う目的には、こっちのタイプがおすすめでしょう

ただし、3Dプリンタ界隈は日が当たるところに出てまだまだ短いことと、3Dプリンタ周辺で煽るような情報/広告が多く、実際に活用している人の評判を聞くことは難しくなっています。
もし個人で購入するのであれば、まず身近にいる3Dプリンタ持ちの方に相談しましょう。そういう人がいない場合、都内であれば「一般社団法人３Ｄデータを活用する会・3D-GAN(http://www.3d-gan.jp/)」(秋葉原)、「あッ3Dプリンター屋だッ!! 東京メイカー×ストーンスープ(http://www.tokyo-maker.com/)」(中野)など、複数台の3Dプリンタを導入し実際に活用している団体やショップに相談するのが良いでしょう。僕自身、3D-GANさんとの相談の結果、Up!Plus2プリンタの購入に踏み切りました。


調整とメンテナンス、消耗品
---------------------------

FDM式3Dプリンタはケーキデコレーションに例えられるように、シンプルな構造です。そのくせ座標調整をする装置は初期型ではほぼありません(ヘッドの衝突回避スイッチがあった程度)。今の世代でやっとステージ高さの自動調整(オートキャリブレーション)が付いたものが出てきましたが、まだまだこれからというところです。
そもそも、FDM式3Dプリンタはミリ以下でのセッティングで樹脂をくっつけていく都合、よろしく運用していくにはどうしても調整やメンテナンスが必要となります。

マニュアル曰く、これをやれ
^^^^^^^^^^^^^^^^^^^^^^^^^^^

よく言われている調整は以下の通り

ヘッド高さ調整
""""""""""""""""

エクストルーダとステージの高さを揃える作業です。たいていはコピー用紙1枚分程度の空間を開けるよう調整する、とありますが、割と雑でもよいようですね。手持ちUp!Plus2では、0.3mm程度のズレまで容認できることもありました。エクストルーダとステージの空間そのまま、プラットフォームと造形物の接合度合に響いてきます。自動調整機能があっても、造形物の固着具合次第では値を0.1mm単位で直接いじってやると作業がはかどります。固く固着する場合は高めに、反対に剥がれやすかったりABSを使う場合は低めにして固着させると良いでしょう。ヘッド高さ調整はフィラメントの具合、造形サイズ(熱収縮が強いABSのときはより固着するよう低くするなど)等調整するとよい部分です。

水平出し
""""""""""

ステージ部の水平を揃える作業です。大抵はエクストルーダをステージの4つ角へ移動させ、それぞれでの高さが均一になるよう調整するものです。大抵の機種のステージには調整用のネジがあり、そこをひねって調整しますが、1点をいじると他3点にも影響するため、根気のいる作業です。最近ではオートキャリブレーションがあるものもありますが、計測だけ自動化しているものが多いようで、ステージ自体の傾きを直すには自分の手が必要です。

.. figure:: img/DSC00058.eps
   :align: center
   :scale: 30%

   Up!Plus2のステージ調整ネジ(3本)。オートキャリブレーション機能を有するプリンタでも、ネジを手で回す調整は必要

基本的にはこの2つぐらいしか調整できるものはありません。あとは3Dプリンタの性能依存であり、それを制御するソフト側のチューニングになります。

消耗品
----------------

フィラメント
^^^^^^^^^^^^^^^

SOZAI、原料。前述の通り、クオリティを左右するものでありながら、運用コストで一番割合が大きいものです。700g～1kgで3000～6000円程度。よく見るルークのモデルデータをそのまま出力すると17g程度なので、700gリールで40個程度、材料費100円前後といった感じでしょうか。
アマゾンでも販売されるようになってきて、お手軽になってきました。

.. figure:: img/rook_print.eps
   :align: center
   :scale: 30%

   同じみのRook by seechlessモデル(http://www.thingiverse.com/thing:99028)。サポート材ない出力が推奨。逆テーパーや中空構造などベンチマーク的な形状も含んでいる

プラットフォーム/セルボード/固定テープ
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

造形物をプラットフォームに固定するパーツの類です。ほとんどの3Dプリンタでは固定/着脱式のプラットフォームに、固定テープや液体ノリ等で表面に層を作り、その上に造形物を作ります。造形後にテープごと造形物をはがして完成、という感じですね。そのため、固定テープは1～3回程度で張り替える必要があるようでした。
例外的にUp!Plus(Afinia)シリーズは、セルボードという多孔パネルをプラットフォーム上にクリップで固定して使います。溶けたフィラメントがセルボードの穴に入り込むことで固着する方式で、出力が終了したらスクレーパーなどで造形物をはがします。このときに、うまくすべて剥がせることもありますが、穴に樹脂が残ってしまいます。樹脂が残っていても、同じ素材なのでそれなりに食いついてはくれますが、食いつきが悪くになったら交換という感じのようです。
今のところ、本体付属分3枚をローテーションで運用していることもあり、公式の交換めどである3か月を過ぎても、食いつきに問題が出た個体はありません。

.. figure:: img/DSC00053.eps
   :align: center
   :scale: 30%

   Up!Plus2のセルボードと固定テープ、造形物を剥がすためのスクレイパー、ニッパー。スクレイパーは思いのほか手に刺さる(痛い)

.. figure:: img/IMG_20131220_183657.eps
   :align: center
   :scale: 30%

   SCOOVO C170は固定テープ方式。エクストルーダ高さを低くしすぎると、テープごとステージに固着してしまい剥がせなくなる！コワイ！

エクストルーダ
^^^^^^^^^^^^^^^

ヒーターからの熱を受けて溶けたフィラメントを、成形して押し出している金口。3Dプリンタショップでは良く売られている交換アクセサリではあります。
交換時期を名言しているところは少なく、どちらかというと目詰まりや操作ミスでPLAフィラメントを炭化させてしまったときに交換する用途のようですね。今のところ、分解清掃で治るトラブルまでしか起きていないため、どの程度で必要になるかは分かりません。

モーター類
^^^^^^^^^^^^^^^

いわゆるメカパーツ。駆動用ベルトとか軸受、モーターの破損、ヒーターの損耗など。動く機械ですから、長期間動かすとそのうち摩耗したり、何かのショックで壊れてしまう可能性があるでしょう
まあ普通は考慮する必要ないとは思いますが


なぜ造形ができないのか
-----------------------

よくある失敗は以下の3つでしょう

邪心モジャモジャの召喚
^^^^^^^^^^^^^^^^^^^^^^^

これはシンプルかつ、Twitterなどでよく見られるオモシロトラブルですね。プラットフォームにフィラメントが食いつかなかった場合に起きます。
エクストルーダの高さ調節が主な対策になるでしょう。
基本的に3Dプリンタはフィラメントの定着については特に面倒見たりはしません。なんらかのセンサーで感知してくれるわけでもないですから、フィラメント交換や調整の後、大型造形をするときは、出力開始後の2,3層が定着するのを確認するまで3Dプリンタから目を離さない方がよいかと思います。

転・送・失・敗
^^^^^^^^^^^^^^^
フィラメントの供給が途絶えて、造形物がXY平面で切断されたパターン。フィラメントの供給系を確認します。よくあるのが、フィラメントがほどけたタイミングで絡まってしまっているパターン、そもそも3Dプリンタの設計ミスでフィラメントの取り込み部の摩擦力が足りず、取り込みギアが空転しているパターンがあります。
フィラメント取り込みギアの空転はSCOOVO C170で発生していました。プリンタの動作音で、時々「カン！カン！」という音がする場合はこれです。可能ならばフィラメント送り機構の交換等で対処できればよいのですが、SCOOVOのように交換を考慮していない場合、Slic3r設定にてフィラメント温度を5～10℃程度上げることで、良い方法ではありませんが対処可能です。前述したようにPLAは温度に対して敏感な素材なため、ちょっとでも上げると物性が変わり、特に粘性が下がるため摩擦の足りない送り機構でも空転を防げるようになります。

プラットフォームから剥がれる
^^^^^^^^^^^^^^^^^^^^^^^^^^^^

ABSのような熱収縮が大きい素材でもっとも起きるトラブル。正直こればっかりは素材の特性によるので、大人しくPLAを使うのが速い。
基本的にはエクストルーダの高さを下げて、よりプラットフォームとエクストルーダが近づくようにすること。加えて、固定テープやセルボードなりで吸着させている場合は、それらが摩耗して吸着力が下がっているのが原因の場合もあるで、新しいテープや新しいセルボードに交換して試す。といったことを試しましょう

.. figure:: img/BsM8VTcCEAAZHhp.eps
   :align: center
   :scale: 30%

   途中で剥離してしまい、もじゃもじゃに成りかけた例。早く気づいてよかった

ディテイルがつぶれる
^^^^^^^^^^^^^^^^^^^^^

XY軸報告にディテイルがつぶれるのは、3Dプリンタのフレームの剛性が低いか、または造形物の固定が甘く振動していまうことが原因です。
といっても、フレームの剛性を簡単に高めることはできないので、設定でヘッドの移動速度を下げるなどで対処するしかないでしょう。Slic3rなどのスライスソフトでは、PerimeterSpeed設定があるのでそれを下げます。Up!plusのように細かな設定がない場合は、出力速度Slow/品質Fineなどの設定項目を探します。
造形物の固定を改善するには、モデルの設置方向や、モデル横に自前のサポートを付けて揺れを防ぐなどがあります。

3Dプリンタを使っていくこと
--------------------------

というわけで、3Dプリンタを使って行くのに必要なテクニック、3Dプリンタの構造、仕様から来る注意ポイントについてざっくり書いてみましたが、どうでしょうか？
3Dプリンタがやっと世代交代が始まり、曲りなりにもマニア向けでない家庭用向け製品が出るようになってきました。ワンフェスなどの模型展示会やアニメ関係のグッズ展示で、3Dプリンタを活用したテストショットを見る機会も増えてきたと思います。3Dプリンタは身近になってきました。

しかし、どちらかといえば旋盤、マシニングセンタといった工作機械の親戚です。プリンタだからと言って紙のプリンタと一緒に扱えるほど簡単ではありません。紙プリンタの歴史は500年以上ありますが、3Dプリンタはここ数十年、ブームになったのはさらにここ数年、まだまだ発展の余地がある技術です。

.. figure:: img/DSCF0064.eps
   :align: center
   :scale: 30%

   うちのUp!Plus2周辺。温度管理のために奥まった冷蔵庫に設置。なお、このようかんマンは100gほどあって、材料代だけで600円ほど掛かっている計算

まあさておき、3Dプリンタは大変面倒で面白い機械ですよ。地雷と罠もてんこ盛りなので、ぜひアグレッシブなマインスイーパーの方々にオススメです☆
